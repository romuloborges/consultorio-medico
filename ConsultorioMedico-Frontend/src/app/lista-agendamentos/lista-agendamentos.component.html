<!-- <div class="container-form mat-elevation-z8">
    <legend>Selecione um ou mais filtro(s) para a busca</legend>
    <legend>Torne a busca mais refinada usando filtros</legend>
    <form #pesquisarForm="ngForm" (ngSubmit)="onSubmit(pesquisarForm)">
        <mat-checkbox color="primary" [(ngModel)]="filtrarPorData" name="filtrarPorData">
            Filtrar por data
        </mat-checkbox>
        <mat-checkbox color="primary" [(ngModel)]="filtrarPorPaciente" name="filtrarPorPaciente" (change)="carregarListaPacientes()">
            Filtrar por paciente
        </mat-checkbox>
        <mat-checkbox color="primary" id="filtrarPorMedico" [(ngModel)]="filtrarPorMedico" name="filtrarPorMedico" (change)="carregarListaMedicos()">
            Filtrar por médico
        </mat-checkbox>
        <mat-checkbox color="primary" id="filtrarPorConsultados" [(ngModel)]="filtrarPorConsultados" name="filtrarPorConsultados">
            Trazer somente os já consultados?
        </mat-checkbox>
        <button mat-button type="submit" class="btn btn-primary" [disabled]="!pesquisarForm.valid">Pesquisar</button>
        <br>
        <mat-form-field color="#87CEEB" *ngIf="filtrarPorData">
            <mat-label>Data de início</mat-label>
            <input matInput readonly required [matDatepicker]="dataInicio" [matDatepickerFilter]="filtro"
                placeholder="Data de início" class="form-control" ngModel name="dataInicio">
            <mat-datepicker-toggle matSuffix [for]="dataInicio"></mat-datepicker-toggle>
            <mat-datepicker #dataInicio></mat-datepicker>
        </mat-form-field>
        <mat-form-field color="#87CEEB" *ngIf="filtrarPorData">
            <mat-label>Data final</mat-label>
            <input matInput readonly required [matDatepicker]="dataFim" [matDatepickerFilter]="filtro"
                placeholder="Data final" class="form-control" ngModel name="dataFim">
            <mat-datepicker-toggle matSuffix [for]="dataFim"></mat-datepicker-toggle>
            <mat-datepicker #dataFim></mat-datepicker>
        </mat-form-field>
        <mat-form-field *ngIf="filtrarPorPaciente">
            <mat-label>Paciente</mat-label>
            <mat-select required [(value)]="i" class="form-control" ngModel name="paciente">
                <mat-option *ngFor="let paciente of listaPacientes; index as i" [value]="i">
                    {{ paciente.nome }}
                </mat-option>
            </mat-select>
        </mat-form-field>
        <mat-form-field *ngIf="filtrarPorMedico">
            <mat-label>Médico</mat-label>
            <mat-select required class="form-control" ngModel name="medico">
                <mat-option *ngFor="let medico of listaMedicos; index as j" [value]="j">
                    {{ medico.nomeMedico }}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </form>
</div> -->
<mat-card class="card-form mat-elevation-z8">
    <mat-card-content>
        <legend>Torne a busca mais refinada usando filtros</legend>
        <form #pesquisarForm="ngForm" (ngSubmit)="onSubmit(pesquisarForm)">
            <mat-checkbox color="primary" [(ngModel)]="filtrarPorData" name="filtrarPorData">
                Filtrar por data
            </mat-checkbox>
            <mat-checkbox color="primary" [(ngModel)]="filtrarPorPaciente" name="filtrarPorPaciente"
                (change)="carregarListaPacientes()">
                Filtrar por paciente
            </mat-checkbox>
            <mat-checkbox color="primary" id="filtrarPorMedico" [(ngModel)]="filtrarPorMedico" name="filtrarPorMedico"
                (change)="carregarListaMedicos()">
                Filtrar por médico
            </mat-checkbox>
            <button mat-button type="submit" class="btn btn-primary"
                [disabled]="!pesquisarForm.valid">Pesquisar</button>
            <br>
            <mat-form-field color="#87CEEB" *ngIf="filtrarPorData">
                <mat-label>Data de início</mat-label>
                <input matInput readonly required [matDatepicker]="dataInicio" [matDatepickerFilter]="filtro"
                    placeholder="Data de início" class="form-control" ngModel name="dataInicio">
                <mat-datepicker-toggle matSuffix [for]="dataInicio"></mat-datepicker-toggle>
                <mat-datepicker #dataInicio></mat-datepicker>
            </mat-form-field>
            <mat-form-field color="#87CEEB" *ngIf="filtrarPorData">
                <mat-label>Data final</mat-label>
                <input matInput readonly required [matDatepicker]="dataFim" [matDatepickerFilter]="filtro"
                    placeholder="Data final" class="form-control" ngModel name="dataFim">
                <mat-datepicker-toggle matSuffix [for]="dataFim"></mat-datepicker-toggle>
                <mat-datepicker #dataFim></mat-datepicker>
            </mat-form-field>
            <mat-form-field *ngIf="filtrarPorPaciente">
                <mat-label>Paciente</mat-label>
                <mat-select required [(value)]="i" class="form-control" ngModel name="paciente">
                    <mat-option *ngFor="let paciente of listaPacientes; index as i" [value]="i">
                        {{ paciente.nome }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field *ngIf="filtrarPorMedico">
                <mat-label>Médico</mat-label>
                <mat-select required class="form-control" ngModel name="medico">
                    <mat-option *ngFor="let medico of listaMedicos; index as j" [value]="j">
                        {{ medico.nomeMedico }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </form>
    </mat-card-content>
</mat-card>
<h1>Agendamentos encontrados</h1>
<div class="container-tabela mat-elevation-z8">
    <table mat-table [dataSource]="dataSource">
        <!-- Coluna de contagem de agendamentos -->
        <ng-container matColumnDef="Id.">
            <th mat-header-cell *matHeaderCellDef>Id.</th>
            <td mat-cell *matCellDef="let agendamento; index as i"> {{ i + 1 }} </td>
        </ng-container>

        <!-- Coluna de nome do paciente -->
        <ng-container matColumnDef="Paciente">
            <th mat-header-cell *matHeaderCellDef>Paciente</th>
            <td mat-cell *matCellDef="let agendamento"> {{ agendamento.pacienteListarViewModel.nomePaciente }} </td>
        </ng-container>

        <!-- Coluna de data de nascimento do paciente -->
        <ng-container matColumnDef="Data de Nascimento">
            <th mat-header-cell *matHeaderCellDef>Data de Nascimento</th>
            <td mat-cell *matCellDef="let agendamento">
                {{ agendamento.pacienteListarViewModel.dataNascimento | date:'dd/MM/yyyy' }} </td>
        </ng-container>

        <!-- Coluna de nome do médico -->
        <ng-container matColumnDef="Médico">
            <th mat-header-cell *matHeaderCellDef>Médico</th>
            <td mat-cell *matCellDef="let agendamento"> {{ agendamento.medicoListarViewModel.nomeMedico }} </td>
        </ng-container>

        <!-- Coluna da data e hora agendada -->
        <ng-container matColumnDef="Data e hora agendada">
            <th mat-header-cell *matHeaderCellDef>Data e hora agendada</th>
            <td mat-cell *matCellDef="let agendamento">
                {{ agendamento.dataHoraAgendamento | date:'dd/MM/yyyy HH:mm'}} </td>
        </ng-container>

        <!-- Coluna de observações -->
        <ng-container matColumnDef="Observações">
            <th mat-header-cell *matHeaderCellDef>Observações</th>
            <td mat-cell *matCellDef="let agendamento"> {{ agendamento.observacoes }} </td>
        </ng-container>

        <!-- Coluna das ações de editar e excluir -->
        <ng-container matColumnDef="Ações">
            <th mat-header-cell *matHeaderCellDef>Ações</th>
            <td mat-cell *matCellDef="let agendamento; index as i">
                <button mat-icon-button (click)="visualizarAgendamento(i)">
                    <mat-icon>visibility</mat-icon>
                </button>
                <button mat-icon-button (click)="editarAgendamento(i)" *ngIf="agendamento.consultaViewModel == null">
                    <mat-icon>edit</mat-icon>
                </button>
                <button mat-icon-button (click)="excluirAgendamento(i)" *ngIf="agendamento.consultaViewModel == null">
                    <mat-icon>delete</mat-icon>
                </button>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="colunas; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: colunas;"></tr>
    </table>
</div>